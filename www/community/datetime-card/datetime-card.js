!function(){"use strict";function t(){}const e=t=>t;function n(t,e,n,o,i){t.__svelte_meta={loc:{file:e,line:n,column:o,char:i}}}function o(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(o)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l;function c(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function d(e){return e&&s(e.destroy)?e.destroy:t}const u="undefined"!=typeof window;let f=u?()=>window.performance.now():()=>Date.now(),h=u?t=>requestAnimationFrame(t):t;const m=new Set;function p(t){m.forEach((e=>{e.c(t)||(m.delete(e),e.f())})),0!==m.size&&h(p)}const g="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function y(t,e){t.appendChild(e)}function w(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function v(t){const e=E("style");return function(t,e){y(t.head||t,e),e.sheet}(w(t),e),e.sheet}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function _(){return x(" ")}function D(){return x("")}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:T(t,e,n)}function k(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function C(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,o,e),i}function S(t){const e={};for(const n of t)e[n.name]=n.value;return e}const A=new Map;let R,L=0;function I(t,e,n,o,i,r,s,a=0){const l=16.666/o;let c="{\n";for(let t=0;t<=1;t+=l){const o=e+(n-e)*r(t);c+=100*t+`%{${s(o,1-o)}}\n`}const d=c+`100% {${s(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(d)}_${a}`,f=w(t),{stylesheet:h,rules:m}=A.get(f)||function(t,e){const n={stylesheet:v(e),rules:{}};return A.set(t,n),n}(f,t);m[u]||(m[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${u} ${o}ms linear ${i}ms 1 both`,L+=1,u}function N(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),L-=i,L||h((()=>{L||(A.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&$(e)})),A.clear())})))}function M(n,o,i,r){if(!o)return t;const s=n.getBoundingClientRect();if(o.left===s.left&&o.right===s.right&&o.top===s.top&&o.bottom===s.bottom)return t;const{delay:a=0,duration:l=300,easing:c=e,start:d=f()+a,end:u=d+l,tick:g=t,css:y}=i(n,{from:o,to:s},r);let w,v=!0,$=!1;function b(){y&&N(n,w),v=!1}return function(t){let e;0===m.size&&h(p),new Promise((n=>{m.add(e={c:t,f:n})}))}((t=>{if(!$&&t>=d&&($=!0),$&&t>=u&&(g(1,0),b()),!v)return!1;if($){const e=0+1*c((t-d)/l);g(e,1-e)}return!0})),y&&(w=I(n,0,1,l,a,c,y)),a||($=!0),g(0,1),b}function P(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:o}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=o,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const o=getComputedStyle(t),i="none"===o.transform?"":o.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,i)}}function j(t){R=t}function B(){if(!R)throw new Error("Function called outside component initialization");return R}const F=[],z=[];let G=[];const W=[],U=Promise.resolve();let H=!1;function Y(t){G.push(t)}const q=new Set;let Z=0;function V(){if(0!==Z)return;const t=R;do{try{for(;Z<F.length;){const t=F[Z];Z++,j(t),X(t.$$)}}catch(t){throw F.length=0,Z=0,t}for(j(null),F.length=0,Z=0;z.length;)z.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];q.has(e)||(q.add(e),e())}G.length=0}while(F.length);for(;W.length;)W.pop()();H=!1,q.clear(),j(t)}function X(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}const K=new Set;function J(t,e){t&&t.i&&(K.delete(t),t.i(e))}function Q(t,e){t.f(),function(t,e){t.d(1),e.delete(t.key)}(t,e)}function tt(t,e,n,o){const i=new Set;for(let r=0;r<e.length;r++){const s=o(n(t,e,r));if(i.has(s))throw new Error("Cannot have duplicate keys in a keyed each");i.add(s)}}function et(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];G.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),G=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(F.push(t),H||(H=!0,U.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,n,a,l,c,d,u,f=[-1]){const h=R;j(e);const m=e.$$={fragment:null,ctx:[],props:d,update:t,not_equal:c,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:i(),dirty:f,skip_bound:!1,root:n.target||h.$$.root};u&&u(m.root);let p=!1;if(m.ctx=a?a(e,n.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=i)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](i),p&&nt(e,t)),n})):[],m.update(),p=!0,r(m.before_update),m.fragment=!!l&&l(m.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);m.fragment&&m.fragment.l(t),t.forEach($)}else m.fragment&&m.fragment.c();n.intro&&J(e.$$.fragment),function(t,e,n,i){const{fragment:a,after_update:l}=t.$$;a&&a.m(e,n),i||Y((()=>{const e=t.$$.on_mount.map(o).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),l.forEach(Y)}(e,n.target,n.anchor,n.customElement),V()}j(h)}let it;function rt(t,e){document.dispatchEvent(C(t,Object.assign({version:"3.59.2"},e),{bubbles:!0}))}function st(t,e){rt("SvelteDOMInsert",{target:t,node:e}),y(t,e)}function at(t,e,n){rt("SvelteDOMInsert",{target:t,node:e,anchor:n}),function(t,e,n){t.insertBefore(e,n||null)}(t,e,n)}function lt(t){rt("SvelteDOMRemove",{node:t}),$(t)}function ct(t,e,n,o,i,r,s){const a=!0===o?["capture"]:o?Array.from(Object.keys(o)):[];i&&a.push("preventDefault"),r&&a.push("stopPropagation"),s&&a.push("stopImmediatePropagation"),rt("SvelteDOMAddEventListener",{node:t,event:e,handler:n,modifiers:a});const l=function(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}(t,e,n,o);return()=>{rt("SvelteDOMRemoveEventListener",{node:t,event:e,handler:n,modifiers:a}),l()}}function dt(t,e,n){T(t,e,n),null==n?rt("SvelteDOMRemoveAttribute",{node:t,attribute:e}):rt("SvelteDOMSetAttribute",{node:t,attribute:e,value:n})}function ut(t,e){e=""+e,t.data!==e&&(rt("SvelteDOMSetData",{node:t,data:e}),t.data=e)}function ft(t){if(!("string"==typeof t||t&&"object"==typeof t&&"length"in t)){let e="{#each} only iterates over array-like objects.";throw"function"==typeof Symbol&&t&&Symbol.iterator in t&&(e+=" You can use a spread to convert this iterable into an array."),new Error(e)}}function ht(t,e,n){for(const o of Object.keys(e))~n.indexOf(o)||console.warn(`<${t}> received an unexpected slot "${o}".`)}function mt(t){const e=t>=0?"":"-",n=Math.abs(t);if(n<30){return`${e}${n} ${1!==n?"days":"day"}`}const o=Math.floor(n/30),i=n%30,r=1!==o?"months":"month";return 0===i?`${e}${o} ${r}`:`${e}${o} ${r}, ${i} ${1!==i?"days":"day"}`}function pt(t,e){var n,o;const i=(null===(o=null===(n=null==t?void 0:t.states)||void 0===n?void 0:n[null==e?void 0:e.id])||void 0===o?void 0:o.state)?new Date(t.states[null==e?void 0:e.id].state):new Date,r=((new Date).getTime()-i.getTime())/864e5;return Math.floor(r)}function gt(t,e,n){return e?n>=0:n>=t}function yt(t,e,n,o){const i=n.states[t.id].attributes.friendly_name,r=t.id,s=new Date;s.setUTCDate((new Date).getUTCDate()+o*t.max);const a=function(t,e,n,o){const i=document.createElement("ha-call-service-button");return i.hass=t,i.confirmation=e,i.domain="input_datetime",i.service="set_datetime",i.serviceData={entity_id:n,date:o},i.style.display="none",i}(n,`Do you want to reset ${i} to ${wt(s)}?`,r,wt(s));e.target.appendChild(a),a._buttonTapped(),e.target.removeChild(a)}function wt(t){const e=t.getUTCFullYear(),n=t.getUTCMonth()+1,o=t.getUTCDate();return`${e}-${n.toString().padStart(2,"0")}-${o.toString().padStart(2,"0")}`}"function"==typeof HTMLElement&&(it=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(o).filter(s);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){et(this,1),this.$destroy=t}$on(e,n){if(!s(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const{Object:vt}=g,$t="src/DatetimeCard.svelte";function bt(t,e,n){const o=t.slice();return o[9]=e[n],o}function Et(t){let e,o;const i={c:function(){e=E("h1"),o=x(t[3]),dt(e,"class","card-header"),n(e,$t,35,2,1246)},m:function(t,n){at(t,e,n),st(e,o)},p:function(t,e){8&e&&ut(o,t[3])},d:function(t){t&&lt(e)}};return rt("SvelteRegisterBlock",{block:i,id:Et.name,type:"if",source:"(35:1) {#if !!header}",ctx:t}),i}function xt(t){let e,o;const i={c:function(){e=E("img"),c(e.src,o=t[7])||dt(e,"src",o),dt(e,"alt","card-pict"),n(e,$t,44,3,1410)},m:function(t,n){at(t,e,n)},p:function(t,n){128&n&&!c(e.src,o=t[7])&&dt(e,"src",o)},d:function(t){t&&lt(e)}};return rt("SvelteRegisterBlock",{block:i,id:xt.name,type:"if",source:"(44:2) {#if !!src}",ctx:t}),i}function _t(t){let e,o,i,r,s,a,l,c,d;const u={c:function(){e=E("datetime-icon"),i=_(),r=E("datetime-bar"),l=_(),c=E("datetime-label"),O(e,"role","listitem"),O(e,"entity",o=t[9]),O(e,"hass",t[0]),O(e,"resetforward",t[4]),n(e,$t,50,20,1623),O(r,"entity",s=t[9]),O(r,"friendlyname",a=t[9].friendly_name),O(r,"hass",t[0]),O(r,"resetforward",t[4]),O(r,"shownames",t[6]),n(r,$t,52,20,1709),O(c,"entity",d=t[9]),O(c,"resetforward",t[4]),O(c,"hass",t[0]),n(c,$t,54,20,1828)},m:function(t,n){at(t,e,n),at(t,i,n),at(t,r,n),at(t,l,n),at(t,c,n)},p:function(t,n){2&n&&o!==(o=t[9])&&O(e,"entity",o),1&n&&O(e,"hass",t[0]),16&n&&O(e,"resetforward",t[4]),2&n&&s!==(s=t[9])&&O(r,"entity",s),2&n&&a!==(a=t[9].friendly_name)&&O(r,"friendlyname",a),1&n&&O(r,"hass",t[0]),16&n&&O(r,"resetforward",t[4]),64&n&&O(r,"shownames",t[6]),2&n&&d!==(d=t[9])&&O(c,"entity",d),16&n&&O(c,"resetforward",t[4]),1&n&&O(c,"hass",t[0])},d:function(t){t&&lt(e),t&&lt(i),t&&lt(r),t&&lt(l),t&&lt(c)}};return rt("SvelteRegisterBlock",{block:u,id:_t.name,type:"if",source:"(50:16) {#if !showExpiredOnly || isExpired(entity.max, resetforward, getState(hass, entity)) }",ctx:t}),u}function Dt(t){let e,n=!t[5]||gt(t[9].max,t[4],pt(t[0],t[9])),o=n&&_t(t);const i={c:function(){o&&o.c(),e=D()},m:function(t,n){o&&o.m(t,n),at(t,e,n)},p:function(t,i){51&i&&(n=!t[5]||gt(t[9].max,t[4],pt(t[0],t[9]))),n?o?o.p(t,i):(o=_t(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},d:function(t){o&&o.d(t),t&&lt(e)}};return rt("SvelteRegisterBlock",{block:i,id:Dt.name,type:"each",source:"(49:3) {#each entities as entity}",ctx:t}),i}function Tt(e){let o,i,r,s,a,l=!!e[3]&&Et(e),c=!!e[7]&&xt(e),d=e[1];ft(d);let u=[];for(let t=0;t<d.length;t+=1)u[t]=Dt(bt(e,d,t));const f={c:function(){o=E("ha-card"),l&&l.c(),i=_(),r=E("div"),c&&c.c(),s=_(),a=E("div");for(let t=0;t<u.length;t+=1)u[t].c();this.c=t,dt(a,"class","grid"),n(a,$t,47,2,1451),dt(r,"data-testid","card-content"),dt(r,"class","card-content"),k(r,"flex-direction",e[2]),n(r,$t,38,1,1293),n(o,$t,33,0,1218)},l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(t,e){at(t,o,e),l&&l.m(o,null),st(o,i),st(o,r),c&&c.m(r,null),st(r,s),st(r,a);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(a,null)},p:function(t,[e]){if(t[3]?l?l.p(t,e):(l=Et(t),l.c(),l.m(o,i)):l&&(l.d(1),l=null),t[7]?c?c.p(t,e):(c=xt(t),c.c(),c.m(r,s)):c&&(c.d(1),c=null),115&e){let n;for(d=t[1],ft(d),n=0;n<d.length;n+=1){const o=bt(t,d,n);u[n]?u[n].p(o,e):(u[n]=Dt(o),u[n].c(),u[n].m(a,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=d.length}4&e&&k(r,"flex-direction",t[2])},i:t,o:t,d:function(t){t&&lt(o),l&&l.d(),c&&c.d(),b(u,t)}};return rt("SvelteRegisterBlock",{block:f,id:Tt.name,type:"component",source:"",ctx:e}),f}const Ot="https://demo.home-assistant.io/stub_config/t-shirt-promo.png",kt="Datetime Card";function Ct(t){const e=(null==t?void 0:t.states)||{},n=Object.keys(e).find((t=>t.startsWith("input_datetime"))),o=2*pt(t,{id:n});return n?[{id:n,max:o}]:[]}function St(t,e,n){let o,{$$slots:i={},$$scope:r}=e;ht("datetime-card",i,[]);let{hass:s}=e;function a(t){n(4,c=t.reset_forward||!1),n(1,o=t.entities),n(3,l=void 0!==t.title?t.title:kt),n(5,d=t.show_expired_only||!1),n(6,u=t.show_names||!1),n(2,h=t.flex_direction||"row"),n(7,f=void 0!==t.image?t.image:Ot)}let l,c,d,u,f,h="row";const m=["hass"];return vt.keys(e).forEach((t=>{~m.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn(`<datetime-card> was created with unknown prop '${t}'`)})),t.$$set=t=>{"hass"in t&&n(0,s=t.hass)},t.$capture_state=()=>({getState:pt,DEFAULT_SRC:Ot,DEFAULT_TITLE:kt,getDefaultEntities:Ct,isExpired:gt,hass:s,setConfig:a,flex_direction:h,header:l,resetforward:c,showExpiredOnly:d,shownames:u,src:f,entities:o}),t.$inject_state=t=>{"hass"in t&&n(0,s=t.hass),"flex_direction"in t&&n(2,h=t.flex_direction),"header"in t&&n(3,l=t.header),"resetforward"in t&&n(4,c=t.resetforward),"showExpiredOnly"in t&&n(5,d=t.showExpiredOnly),"shownames"in t&&n(6,u=t.shownames),"src"in t&&n(7,f=t.src),"entities"in t&&n(1,o=t.entities)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{3&t.$$.dirty&&n(1,o=o||Ct(s))},[s,o,h,l,c,d,u,f,a]}class At extends it{constructor(t){super();const e=document.createElement("style");e.textContent=".card-header{overflow:hidden;text-overflow:ellipsis !important;white-space:nowrap}.card-content{display:flex;justify-content:center;align-items:center}img{max-width:40%}.grid{display:grid;flex-grow:1;grid-template-columns:24px auto min-content;margin:10px;gap:10px;align-items:center;width:100%}datetime-label{justify-self:end}",this.shadowRoot.appendChild(e),ot(this,{target:this.shadowRoot,props:S(this.attributes),customElement:!0},St,Tt,a,{hass:0,setConfig:8},null),t&&(t.target&&at(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["hass","setConfig"]}get hass(){return this.$$.ctx[0]}set hass(t){this.$$set({hass:t}),V()}get setConfig(){return this.$$.ctx[8]}set setConfig(t){throw new Error("<datetime-card>: Cannot set read-only property 'setConfig'")}}customElements.define("datetime-card",At);const Rt="finalize",Lt="consider";function It(t,e,n){t.dispatchEvent(new CustomEvent(Rt,{detail:{items:e,info:n}}))}function Nt(t,e,n){t.dispatchEvent(new CustomEvent(Lt,{detail:{items:e,info:n}}))}const Mt="draggedEntered",Pt="draggedLeft",jt="draggedOverIndex",Bt="draggedLeftDocument",Ft={LEFT_FOR_ANOTHER:"leftForAnother",OUTSIDE_OF_ANY:"outsideOfAny"};function zt(t,e,n){t.dispatchEvent(new CustomEvent(Mt,{detail:{indexObj:e,draggedEl:n}}))}function Gt(t,e,n){t.dispatchEvent(new CustomEvent(Pt,{detail:{draggedEl:e,type:Ft.LEFT_FOR_ANOTHER,theOtherDz:n}}))}function Wt(t,e,n){t.dispatchEvent(new CustomEvent(jt,{detail:{indexObj:e,draggedEl:n}}))}const Ut={DRAG_STARTED:"dragStarted",DRAGGED_ENTERED:Mt,DRAGGED_ENTERED_ANOTHER:"dragEnteredAnother",DRAGGED_OVER_INDEX:jt,DRAGGED_LEFT:Pt,DRAGGED_LEFT_ALL:"draggedLeftAll",DROPPED_INTO_ZONE:"droppedIntoZone",DROPPED_INTO_ANOTHER:"droppedIntoAnother",DROPPED_OUTSIDE_OF_ANY:"droppedOutsideOfAny",DRAG_STOPPED:"dragStopped"},Ht={POINTER:"pointer",KEYBOARD:"keyboard"},Yt="isDndShadowItem",qt="data-is-dnd-shadow-item-internal",Zt="data-is-dnd-shadow-item-hint",Vt="id:dnd-shadow-placeholder-0000",Xt="dnd-action-dragged-el";let Kt="id",Jt=0;function Qt(){Jt++}function te(){if(0===Jt)throw new Error("Bug! trying to decrement when there are no dropzones");Jt--}const ee="undefined"==typeof window;function ne(t){let e;const n=t.getBoundingClientRect(),o=getComputedStyle(t),i=o.transform;if(i){let r,s,a,l;if(i.startsWith("matrix3d("))e=i.slice(9,-1).split(/, /),r=+e[0],s=+e[5],a=+e[12],l=+e[13];else{if(!i.startsWith("matrix("))return n;e=i.slice(7,-1).split(/, /),r=+e[0],s=+e[3],a=+e[4],l=+e[5]}const c=o.transformOrigin,d=n.x-a-(1-r)*parseFloat(c),u=n.y-l-(1-s)*parseFloat(c.slice(c.indexOf(" ")+1)),f=r?n.width/r:t.offsetWidth,h=s?n.height/s:t.offsetHeight;return{x:d,y:u,width:f,height:h,top:u,right:d+f,bottom:u+h,left:d}}return n}function oe(t){const e=ne(t);return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function ie(t){const e=t.getBoundingClientRect();return{top:e.top+window.scrollY,bottom:e.bottom+window.scrollY,left:e.left+window.scrollX,right:e.right+window.scrollX}}function re(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}function se(t,e){return t.y<=e.bottom&&t.y>=e.top&&t.x>=e.left&&t.x<=e.right}function ae(t){return re(ie(t))}function le(t,e){return se(ae(t),oe(e))}function ce(t,e){const n=ae(t),o=ae(e);return i=n,r=o,Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));var i,r}let de;function ue(){de=new Map}function fe(t,e){if(!le(t,e))return null;const n=e.children;if(0===n.length)return{index:0,isProximityBased:!0};const o=function(t){const e=Array.from(t.children).findIndex((t=>t.getAttribute(qt)));if(e>=0)return de.has(t)||de.set(t,new Map),de.get(t).set(e,oe(t.children[e])),e}(e);for(let i=0;i<n.length;i++)if(le(t,n[i])){const n=de.has(e)&&de.get(e).get(i);return n&&!se(ae(t),n)?{index:o,isProximityBased:!1}:{index:i,isProximityBased:!1}}let i,r=Number.MAX_VALUE;for(let e=0;e<n.length;e++){const o=ce(t,n[e]);o<r&&(r=o,i=e)}return{index:i,isProximityBased:!0}}function he(t){return JSON.stringify(t,null,2)}function me(t){if(!t)throw new Error("cannot get depth of a falsy node");return pe(t,0)}function pe(t,e=0){return t.parentElement?pe(t.parentElement,e+1):e-1}ue();const ge=200,ye=10;let we;function ve(t,e,n=ge,o){let i,r,s,a=!1;const l=Array.from(e).sort(((t,e)=>me(e)-me(t)));!function e(){const c=ae(t),d=o.multiScrollIfNeeded();if(!d&&s&&Math.abs(s.x-c.x)<ye&&Math.abs(s.y-c.y)<ye)return void(we=window.setTimeout(e,n));if(function(t){const e=ie(t);return e.right<0||e.left>document.documentElement.scrollWidth||e.bottom<0||e.top>document.documentElement.scrollHeight}(t))return void function(t){window.dispatchEvent(new CustomEvent(Bt,{detail:{draggedEl:t}}))}(t);s=c;let u=!1;for(const e of l){d&&ue();const n=fe(t,e);if(null===n)continue;const{index:o}=n;u=!0,e!==i?(i&&Gt(i,t,e),zt(e,n,t),i=e):o!==r&&(Wt(e,n,t),r=o);break}!u&&a&&i?(!function(t,e){t.dispatchEvent(new CustomEvent(Pt,{detail:{draggedEl:e,type:Ft.OUTSIDE_OF_ANY}}))}(i,t),i=void 0,r=void 0,a=!1):a=!0,we=window.setTimeout(e,n)}()}const $e=30;function be(){let t;function e(){t={directionObj:void 0,stepPx:0}}function n(e){const{directionObj:o,stepPx:i}=t;o&&(e.scrollBy(o.x*i,o.y*i),window.requestAnimationFrame((()=>n(e))))}function o(t){return $e-t}return e(),{scrollIfNeeded:function(i,r){if(!r)return!1;const s=function(t,e){const n=e===document.scrollingElement?{top:0,bottom:window.innerHeight,left:0,right:window.innerWidth}:e.getBoundingClientRect();if(!se(t,n))return null;return{top:t.y-n.top,bottom:n.bottom-t.y,left:t.x-n.left,right:n.right-t.x}}(i,r);if(null===s)return e(),!1;const a=!!t.directionObj;let[l,c]=[!1,!1];return r.scrollHeight>r.clientHeight&&(s.bottom<$e?(l=!0,t.directionObj={x:0,y:1},t.stepPx=o(s.bottom)):s.top<$e&&(l=!0,t.directionObj={x:0,y:-1},t.stepPx=o(s.top)),!a&&l)||r.scrollWidth>r.clientWidth&&(s.right<$e?(c=!0,t.directionObj={x:1,y:0},t.stepPx=o(s.right)):s.left<$e&&(c=!0,t.directionObj={x:-1,y:0},t.stepPx=o(s.left)),!a&&c)?(n(r),!0):(e(),!1)},resetScrolling:e}}function Ee(t=[],e){const n=function(t){const e=new Set;for(let n of t)xe(n).forEach((t=>e.add(t)));(document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight||document.scrollingElement.scrollWidth>document.scrollingElement.clientHeight)&&e.add(document.scrollingElement);return e}(t),o=Array.from(n).sort(((t,e)=>me(e)-me(t))),{scrollIfNeeded:i}=be();return{multiScrollIfNeeded:n.size>0?function(){const t=e();if(!t||!o)return!1;const n=o.filter((e=>se(t,e.getBoundingClientRect())||e===document.scrollingElement));for(let e=0;e<n.length;e++){if(i(t,n[e]))return!0}return!1}:()=>!1}}function xe(t){if(!t)return[];const e=[];let n=t;for(;n;){const{overflow:t}=window.getComputedStyle(n);t.split(" ").some((t=>t.includes("auto")||t.includes("scroll")))&&e.push(n),n=n.parentElement}return e}const _e=Object.freeze({USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT:"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT"}),De={[_e.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT]:!1};function Te(t){if(!_e[t])throw new Error(`Can't get non existing feature flag ${t}! Supported flags: ${Object.keys(_e)}`);return De[t]}const Oe=.2;function ke(t){return`${t} ${Oe}s ease`}function Ce(t,e,n,o){Se(e,t);const i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),s=i.width-r.width,a=i.height-r.height;if(s||a){const e={left:(n-r.left)/r.width,top:(o-r.top)/r.height};Te(_e.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)||(t.style.height=`${i.height}px`,t.style.width=`${i.width}px`),t.style.left=parseFloat(t.style.left)-e.left*s+"px",t.style.top=parseFloat(t.style.top)-e.top*a+"px"}}function Se(t,e){const n=window.getComputedStyle(t);Array.from(n).filter((t=>t.startsWith("background")||t.startsWith("padding")||t.startsWith("font")||t.startsWith("text")||t.startsWith("align")||t.startsWith("justify")||t.startsWith("display")||t.startsWith("flex")||t.startsWith("border")||"opacity"===t||"color"===t||"list-style-type"===t||Te(_e.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)&&("width"===t||"height"===t))).forEach((t=>e.style.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))))}function Ae(t,e){t.draggable=!1,t.ondragstart=()=>!1,e?(t.style.userSelect="",t.style.WebkitUserSelect="",t.style.cursor=""):(t.style.userSelect="none",t.style.WebkitUserSelect="none",t.style.cursor="grab")}function Re(t){t.style.display="none",t.style.position="fixed",t.style.zIndex="-5"}function Le(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=o[e]})),n(t).forEach((e=>t.classList.add(e)))}))}function Ie(t,e=(()=>{}),n=(()=>[])){t.forEach((t=>{const o=e(t);Object.keys(o).forEach((e=>{t.style[e]=""})),n(t).forEach((e=>t.classList.contains(e)&&t.classList.remove(e)))}))}const Ne="--any--",Me=100,Pe=20,je=3,Be={outline:"rgba(255, 255, 102, 0.7) solid 2px"},Fe="data-is-dnd-original-dragged-item";let ze,Ge,We,Ue,He,Ye,qe,Ze,Ve,Xe,Ke,Je=!1,Qe=!1,tn=!1,en=[];const nn=new Map,on=new Map,rn=new WeakMap;function sn(t,e){nn.get(e).delete(t),te(),0===nn.get(e).size&&nn.delete(e)}function an(){const t=nn.get(Ue);for(const e of t)e.removeEventListener(Mt,cn),e.removeEventListener(Pt,dn),e.removeEventListener(jt,un);window.removeEventListener(Bt,hn),clearTimeout(we),ue()}function ln(t){return t.findIndex((t=>!!t[Yt]))}function cn(t){let{items:e,dropFromOthersDisabled:n}=on.get(t.currentTarget);if(n&&t.currentTarget!==He)return;if(tn=!1,e=e.filter((t=>t[Kt]!==qe[Kt])),He!==t.currentTarget){const t=on.get(He).items.filter((t=>!t[Yt]));Nt(He,t,{trigger:Ut.DRAGGED_ENTERED_ANOTHER,id:We[Kt],source:Ht.POINTER})}const{index:o,isProximityBased:i}=t.detail.indexObj,r=i&&o===t.currentTarget.children.length-1?o+1:o;Ze=t.currentTarget,e.splice(r,0,qe),Nt(t.currentTarget,e,{trigger:Ut.DRAGGED_ENTERED,id:We[Kt],source:Ht.POINTER})}function dn(t){if(!Je)return;const{items:e,dropFromOthersDisabled:n}=on.get(t.currentTarget);if(n&&t.currentTarget!==He&&t.currentTarget!==Ze)return;const o=[...e],i=ln(o);-1!==i&&o.splice(i,1);const r=Ze;Ze=void 0;const{type:s,theOtherDz:a}=t.detail;if(s===Ft.OUTSIDE_OF_ANY||s===Ft.LEFT_FOR_ANOTHER&&a!==He&&on.get(a).dropFromOthersDisabled){tn=!0,Ze=He;const t=r===He?o:[...on.get(He).items];t.splice(Ye,0,qe),Nt(He,t,{trigger:Ut.DRAGGED_LEFT_ALL,id:We[Kt],source:Ht.POINTER})}Nt(t.currentTarget,o,{trigger:Ut.DRAGGED_LEFT,id:We[Kt],source:Ht.POINTER})}function un(t){const{items:e,dropFromOthersDisabled:n}=on.get(t.currentTarget);if(n&&t.currentTarget!==He)return;const o=[...e];tn=!1;const{index:i}=t.detail.indexObj,r=ln(o);-1!==r&&o.splice(r,1),o.splice(i,0,qe),Nt(t.currentTarget,o,{trigger:Ut.DRAGGED_OVER_INDEX,id:We[Kt],source:Ht.POINTER})}function fn(t){t.preventDefault();const e=t.touches?t.touches[0]:t;Xe={x:e.clientX,y:e.clientY},Ge.style.transform=`translate3d(${Xe.x-Ve.x}px, ${Xe.y-Ve.y}px, 0)`}function hn(){Qe=!0,window.removeEventListener("mousemove",fn),window.removeEventListener("touchmove",fn),window.removeEventListener("mouseup",hn),window.removeEventListener("touchend",hn),an(),function(t){t.style.cursor="grab"}(Ge),Ze||(Ze=He);let{items:t,type:e}=on.get(Ze);Ie(nn.get(e),(t=>on.get(t).dropTargetStyle),(t=>on.get(t).dropTargetClasses));let n=ln(t);-1===n&&Ze===He&&(n=Ye),t=t.map((t=>t[Yt]?We:t)),function(t,e){const n=ne(t>-1?Ze.children[t]:Ze),o={x:n.left-parseFloat(Ge.style.left),y:n.top-parseFloat(Ge.style.top)},{dropAnimationDurationMs:i}=on.get(Ze),r=`transform ${i}ms ease`;Ge.style.transition=Ge.style.transition?Ge.style.transition+","+r:r,Ge.style.transform=`translate3d(${o.x}px, ${o.y}px, 0)`,window.setTimeout(e,i)}(n,(function(){var e;Ke(),It(Ze,t,{trigger:tn?Ut.DROPPED_OUTSIDE_OF_ANY:Ut.DROPPED_INTO_ZONE,id:We[Kt],source:Ht.POINTER}),Ze!==He&&It(He,on.get(He).items,{trigger:Ut.DROPPED_INTO_ANOTHER,id:We[Kt],source:Ht.POINTER}),-1!==n&&((e=Ze.children[n]).style.visibility="",e.removeAttribute(qt)),function(){Ge.remove(),ze.remove(),en.length&&(en.forEach((({dz:t,destroy:e})=>{e(),t.remove()})),en=[]);Ge=void 0,ze=void 0,We=void 0,Ue=void 0,He=void 0,Ye=void 0,qe=void 0,Ze=void 0,Ve=void 0,Xe=void 0,Je=!1,Qe=!1,Ke=void 0,tn=!1}()}))}function mn(t,e){let n=!1;const o={items:void 0,type:void 0,flipDurationMs:0,dragDisabled:!1,morphDisabled:!1,dropFromOthersDisabled:!1,dropTargetStyle:Be,dropTargetClasses:[],transformDraggedElement:()=>{},centreDraggedOnCursor:!1};let i=new Map;function r(){window.removeEventListener("mousemove",a),window.removeEventListener("touchmove",a),window.removeEventListener("mouseup",s),window.removeEventListener("touchend",s)}function s(t){r(),ze=void 0,Ve=void 0,Xe=void 0,"touchend"===t.type&&t.target.click()}function a(t){t.preventDefault();const e=t.touches?t.touches[0]:t;Xe={x:e.clientX,y:e.clientY},(Math.abs(Xe.x-Ve.x)>=je||Math.abs(Xe.y-Ve.y)>=je)&&(r(),function(){Je=!0;const t=i.get(ze);Ye=t,He=ze.parentElement;const e=He.closest("dialog")||He.getRootNode(),n=e.body||e,{items:r,type:s,centreDraggedOnCursor:a}=o,l=[...r];function c(){Ge.parentElement?window.requestAnimationFrame(c):(n.appendChild(Ge),Ge.focus(),function(){const t=nn.get(Ue);for(const e of t)e.addEventListener(Mt,cn),e.addEventListener(Pt,dn),e.addEventListener(jt,un);window.addEventListener(Bt,hn);const e=Math.max(...Array.from(t.keys()).map((t=>on.get(t).dropAnimationDurationMs))),n=0===e?Pe:Math.max(e,Me),o=Ee(t,(()=>Xe));ve(Ge,t,1.07*n,o)}(),Re(ze),n.appendChild(ze),qe[Kt]=We[Kt])}We=l[t],Ue=s,qe=function(t){return{...t,[Yt]:!0,[Kt]:Vt}}(We),Ge=function(t,e){const n=t.getBoundingClientRect(),o=function(t){const e=t.cloneNode(!0),n=[],o="SELECT"===t.tagName,i=o?[t]:[...t.querySelectorAll("select")];for(const t of i)n.push(t.value);if(i.length>0){const t=o?[e]:[...e.querySelectorAll("select")];for(let e=0;e<t.length;e++){const o=t[e],i=n[e],r=o.querySelector(`option[value="${i}"`);r&&r.setAttribute("selected",!0)}}const r="CANVAS"===t.tagName,s=r?[t]:[...t.querySelectorAll("canvas")];if(s.length>0){const t=r?[e]:[...e.querySelectorAll("canvas")];for(let e=0;e<t.length;e++){const n=s[e],o=t[e];o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0)}}return e}(t);Se(t,o),o.id=Xt,o.style.position="fixed";let i=n.top,r=n.left;if(o.style.top=`${i}px`,o.style.left=`${r}px`,e){const t=re(n);i-=t.y-e.y,r-=t.x-e.x,window.setTimeout((()=>{o.style.top=`${i}px`,o.style.left=`${r}px`}),0)}return o.style.margin="0",o.style.boxSizing="border-box",o.style.height=`${n.height}px`,o.style.width=`${n.width}px`,o.style.transition=`${ke("top")}, ${ke("left")}, ${ke("background-color")}, ${ke("opacity")}, ${ke("color")} `,window.setTimeout((()=>o.style.transition+=`, ${ke("width")}, ${ke("height")}`),0),o.style.zIndex="9999",o.style.cursor="grabbing",o}(ze,a&&Xe),ze.setAttribute(Fe,!0),window.requestAnimationFrame(c),Le(Array.from(nn.get(o.type)).filter((t=>t===He||!on.get(t).dropFromOthersDisabled)),(t=>on.get(t).dropTargetStyle),(t=>on.get(t).dropTargetClasses)),l.splice(t,1,qe),Ke=function(t){const e=t.style.minHeight;t.style.minHeight=window.getComputedStyle(t).getPropertyValue("height");const n=t.style.minWidth;return t.style.minWidth=window.getComputedStyle(t).getPropertyValue("width"),function(){t.style.minHeight=e,t.style.minWidth=n}}(He),Nt(He,l,{trigger:Ut.DRAG_STARTED,id:We[Kt],source:Ht.POINTER}),window.addEventListener("mousemove",fn,{passive:!1}),window.addEventListener("touchmove",fn,{passive:!1,capture:!1}),window.addEventListener("mouseup",hn,{passive:!1}),window.addEventListener("touchend",hn,{passive:!1})}())}function l(t){if(t.target!==t.currentTarget&&(void 0!==t.target.value||t.target.isContentEditable))return;if(t.button)return;if(Je)return;t.preventDefault(),t.stopPropagation();const e=t.touches?t.touches[0]:t;Ve={x:e.clientX,y:e.clientY},Xe={...Ve},ze=t.currentTarget,window.addEventListener("mousemove",a,{passive:!1}),window.addEventListener("touchmove",a,{passive:!1,capture:!1}),window.addEventListener("mouseup",s,{passive:!1}),window.addEventListener("touchend",s,{passive:!1})}function c({items:e,flipDurationMs:r=0,type:s=Ne,dragDisabled:a=!1,morphDisabled:c=!1,dropFromOthersDisabled:d=!1,dropTargetStyle:u=Be,dropTargetClasses:f=[],transformDraggedElement:h=(()=>{}),centreDraggedOnCursor:m=!1}){function p(t,e){return on.get(t)?on.get(t)[e]:o[e]}var g,y;o.dropAnimationDurationMs=r,o.type&&s!==o.type&&sn(t,o.type),o.type=s,o.items=[...e],o.dragDisabled=a,o.morphDisabled=c,o.transformDraggedElement=h,o.centreDraggedOnCursor=m,!n||!Je||Qe||function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!{}.hasOwnProperty.call(e,n)||e[n]!==t[n])return!1;return!0}(u,o.dropTargetStyle)&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(f,o.dropTargetClasses)||(Ie([t],(()=>o.dropTargetStyle),(()=>f)),Le([t],(()=>u),(()=>f))),o.dropTargetStyle=u,o.dropTargetClasses=[...f],n&&Je&&o.dropFromOthersDisabled!==d&&(d?Ie([t],(t=>p(t,"dropTargetStyle")),(t=>p(t,"dropTargetClasses"))):Le([t],(t=>p(t,"dropTargetStyle")),(t=>p(t,"dropTargetClasses")))),o.dropFromOthersDisabled=d,on.set(t,o),g=t,y=s,nn.has(y)||nn.set(y,new Set),nn.get(y).has(g)||(nn.get(y).add(g),Qt());const w=ln(o.items);for(let e=0;e<t.children.length;e++){const r=t.children[e];Ae(r,a),e!==w?(r.removeEventListener("mousedown",rn.get(r)),r.removeEventListener("touchstart",rn.get(r)),a||(r.addEventListener("mousedown",l),r.addEventListener("touchstart",l),rn.set(r,l)),i.set(r,e),n||(n=!0)):(o.transformDraggedElement(Ge,We,e),c||Ce(Ge,r,Xe.x,Xe.y),(v=r).style.visibility="hidden",v.setAttribute(qt,"true"))}var v}return c(e),{update:t=>{c(t)},destroy:()=>{function e(){sn(t,on.get(t).type),on.delete(t)}var n,o;Je&&!t.closest(`[${Fe}]`)?(n=t,o=e,en.push({dz:n,destroy:o}),window.requestAnimationFrame((()=>{Re(n),document.body.appendChild(n)}))):e()}}}const pn={DND_ZONE_ACTIVE:"dnd-zone-active",DND_ZONE_DRAG_DISABLED:"dnd-zone-drag-disabled"},gn={[pn.DND_ZONE_ACTIVE]:"Tab to one the items and press space-bar or enter to start dragging it",[pn.DND_ZONE_DRAG_DISABLED]:"This is a disabled drag and drop list"},yn="dnd-action-aria-alert";let wn;function vn(){wn||(wn=document.createElement("div"),wn.id=yn,wn.style.position="fixed",wn.style.bottom="0",wn.style.left="0",wn.style.zIndex="-5",wn.style.opacity="0",wn.style.height="0",wn.style.width="0",wn.setAttribute("role","alert"),document.body.prepend(wn),Object.entries(gn).forEach((([t,e])=>document.body.prepend(function(t,e){const n=document.createElement("div");return n.id=t,n.innerHTML=`<p>${e}</p>`,n.style.display="none",n.style.position="fixed",n.style.zIndex="-5",n}(t,e)))))}function $n(t){if(ee)return;wn||vn(),wn.innerHTML="";const e=document.createTextNode(t);wn.appendChild(e),wn.style.display="none",wn.style.display="inline"}const bn="--any--",En={outline:"rgba(255, 255, 102, 0.7) solid 2px"};let xn,_n,Dn,Tn,On=!1,kn="",Cn="";const Sn=new WeakSet,An=new WeakMap,Rn=new WeakMap,Ln=new Map,In=new Map,Nn=new Map;let Mn;function Pn(t,e){0===Nn.size&&(Mn=ee?null:("complete"===document.readyState?vn():window.addEventListener("DOMContentLoaded",vn),{...pn}),window.addEventListener("keydown",Bn),window.addEventListener("click",Fn)),Nn.has(e)||Nn.set(e,new Set),Nn.get(e).has(t)||(Nn.get(e).add(t),Qt())}function jn(t,e){_n===t&&Wn(),Nn.get(e).delete(t),te(),0===Nn.get(e).size&&Nn.delete(e),0===Nn.size&&(window.removeEventListener("keydown",Bn),window.removeEventListener("click",Fn),Mn=void 0,!ee&&wn&&(Object.keys(gn).forEach((t=>document.getElementById(t)?.remove())),wn.remove(),wn=void 0))}function Bn(t){if(On&&"Escape"===t.key)Wn()}function Fn(){On&&(Sn.has(document.activeElement)||Wn())}function zn(t){if(!On)return;const e=t.currentTarget;if(e===_n)return;kn=e.getAttribute("aria-label")||"";const{items:n}=In.get(_n),o=n.find((t=>t[Kt]===Tn)),i=n.indexOf(o),r=n.splice(i,1)[0],{items:s,autoAriaDisabled:a}=In.get(e);e.getBoundingClientRect().top<_n.getBoundingClientRect().top||e.getBoundingClientRect().left<_n.getBoundingClientRect().left?(s.push(r),a||$n(`Moved item ${Cn} to the end of the list ${kn}`)):(s.unshift(r),a||$n(`Moved item ${Cn} to the beginning of the list ${kn}`));It(_n,n,{trigger:Ut.DROPPED_INTO_ANOTHER,id:Tn,source:Ht.KEYBOARD}),It(e,s,{trigger:Ut.DROPPED_INTO_ZONE,id:Tn,source:Ht.KEYBOARD}),_n=e}function Gn(){Ln.forEach((({update:t},e)=>t(In.get(e))))}function Wn(t=!0){In.get(_n).autoAriaDisabled||$n(`Stopped dragging item ${Cn}`),Sn.has(document.activeElement)&&document.activeElement.blur(),t&&Nt(_n,In.get(_n).items,{trigger:Ut.DRAG_STOPPED,id:Tn,source:Ht.KEYBOARD}),Ie(Nn.get(xn),(t=>In.get(t).dropTargetStyle),(t=>In.get(t).dropTargetClasses)),Dn=null,Tn=null,Cn="",xn=null,_n=null,kn="",On=!1,Gn()}function Un(t,e){const n={items:void 0,type:void 0,dragDisabled:!1,zoneTabIndex:0,zoneItemTabIndex:0,dropFromOthersDisabled:!1,dropTargetStyle:En,dropTargetClasses:[],autoAriaDisabled:!1};function o(t,e,n){t.length<=1||t.splice(n,1,t.splice(e,1,t[n])[0])}function i(e){switch(e.key){case"Enter":case" ":if((void 0!==e.target.disabled||e.target.href||e.target.isContentEditable)&&!Sn.has(e.target))return;e.preventDefault(),e.stopPropagation(),On?Wn():r(e);break;case"ArrowDown":case"ArrowRight":{if(!On)return;e.preventDefault(),e.stopPropagation();const{items:i}=In.get(t),r=Array.from(t.children),s=r.indexOf(e.currentTarget);s<r.length-1&&(n.autoAriaDisabled||$n(`Moved item ${Cn} to position ${s+2} in the list ${kn}`),o(i,s,s+1),It(t,i,{trigger:Ut.DROPPED_INTO_ZONE,id:Tn,source:Ht.KEYBOARD}));break}case"ArrowUp":case"ArrowLeft":{if(!On)return;e.preventDefault(),e.stopPropagation();const{items:i}=In.get(t),r=Array.from(t.children).indexOf(e.currentTarget);r>0&&(n.autoAriaDisabled||$n(`Moved item ${Cn} to position ${r} in the list ${kn}`),o(i,r,r-1),It(t,i,{trigger:Ut.DROPPED_INTO_ZONE,id:Tn,source:Ht.KEYBOARD}));break}}}function r(e){!function(e){const{items:o}=In.get(t),i=Array.from(t.children),r=i.indexOf(e);Dn=e,Dn.tabIndex=n.zoneItemTabIndex,Tn=o[r][Kt],Cn=i[r].getAttribute("aria-label")||""}(e.currentTarget),_n=t,xn=n.type,On=!0;const o=Array.from(Nn.get(n.type)).filter((t=>t===_n||!In.get(t).dropFromOthersDisabled));if(Le(o,(t=>In.get(t).dropTargetStyle),(t=>In.get(t).dropTargetClasses)),!n.autoAriaDisabled){let t=`Started dragging item ${Cn}. Use the arrow keys to move it within its list ${kn}`;o.length>1&&(t+=", or tab to another list in order to move the item into it"),$n(t)}Nt(t,In.get(t).items,{trigger:Ut.DRAG_STARTED,id:Tn,source:Ht.KEYBOARD}),Gn()}function s(t){On&&t.currentTarget!==Dn&&(t.stopPropagation(),Wn(!1),r(t))}function a({items:e=[],type:o=bn,dragDisabled:r=!1,zoneTabIndex:a=0,zoneItemTabIndex:l=0,dropFromOthersDisabled:c=!1,dropTargetStyle:d=En,dropTargetClasses:u=[],autoAriaDisabled:f=!1}){n.items=[...e],n.dragDisabled=r,n.dropFromOthersDisabled=c,n.zoneTabIndex=a,n.zoneItemTabIndex=l,n.dropTargetStyle=d,n.dropTargetClasses=u,n.autoAriaDisabled=f,n.type&&o!==n.type&&jn(t,n.type),n.type=o,Pn(t,o),f||(t.setAttribute("aria-disabled",r),t.setAttribute("role","list"),t.setAttribute("aria-describedby",r?Mn.DND_ZONE_DRAG_DISABLED:Mn.DND_ZONE_ACTIVE)),In.set(t,n),t.tabIndex=On?t===_n||Dn.contains(t)||n.dropFromOthersDisabled||_n&&n.type!==In.get(_n).type?-1:0:n.zoneTabIndex,t.addEventListener("focus",zn);for(let e=0;e<t.children.length;e++){const o=t.children[e];Sn.add(o),o.tabIndex=On?-1:n.zoneItemTabIndex,f||o.setAttribute("role","listitem"),o.removeEventListener("keydown",An.get(o)),o.removeEventListener("click",Rn.get(o)),r||(o.addEventListener("keydown",i),An.set(o,i),o.addEventListener("click",s),Rn.set(o,s)),On&&n.items[e][Kt]===Tn&&(Dn=o,Dn.tabIndex=n.zoneItemTabIndex,o.focus())}}a(e);const l={update:t=>{a(t)},destroy:()=>{jn(t,n.type),In.delete(t),Ln.delete(t)}};return Ln.set(t,l),l}function Hn(t,e){if(function(t){return!!t.closest(`[${Zt}="true"]`)}(t))return{update:()=>{},destroy:()=>{}};Yn(e);const n=mn(t,e),o=Un(t,e);return{update:t=>{Yn(t),n.update(t),o.update(t)},destroy:()=>{n.destroy(),o.destroy()}}}function Yn(t){const{items:e,flipDurationMs:n,type:o,dragDisabled:i,morphDisabled:r,dropFromOthersDisabled:s,zoneTabIndex:a,zoneItemTabIndex:l,dropTargetStyle:c,dropTargetClasses:d,transformDraggedElement:u,autoAriaDisabled:f,centreDraggedOnCursor:h,...m}=t;if(Object.keys(m).length>0&&console.warn("dndzone will ignore unknown options",m),!e)throw new Error("no 'items' key provided to dndzone");const p=e.find((t=>!{}.hasOwnProperty.call(t,Kt)));if(p)throw new Error(`missing '${Kt}' property for item ${he(p)}`);if(d&&!Array.isArray(d))throw new Error(`dropTargetClasses should be an array but instead it is a ${typeof d}, ${he(d)}`);if(a&&!qn(a))throw new Error(`zoneTabIndex should be a number but instead it is a ${typeof a}, ${he(a)}`);if(l&&!qn(l))throw new Error(`zoneItemTabIndex should be a number but instead it is a ${typeof l}, ${he(l)}`)}function qn(t){return!isNaN(t)&&(0|(e=parseFloat(t)))===e;var e}function Zn(t,e=500){const n=()=>{const n=setTimeout((()=>{t.dispatchEvent(new CustomEvent("hold")),t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",o),t.removeEventListener("touchcancel",o),t.removeEventListener("touchend",o),t.removeEventListener("touchmove",o)}),e),o=()=>{clearTimeout(n),t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",o),t.removeEventListener("touchcancel",o),t.removeEventListener("touchend",o),t.removeEventListener("touchmove",o)};t.addEventListener("mousemove",o),t.addEventListener("mouseup",o),t.addEventListener("touchcancel",o),t.addEventListener("touchend",o),t.addEventListener("touchmove",o)};return t.addEventListener("mousedown",n),t.addEventListener("touchstart",n),{destroy(){t.removeEventListener("mousedown",n),t.removeEventListener("touchstart",n)}}}const Vn="src/datetime/DatetimeBar.svelte";function Xn(t){let e,o,i=`drop-shadow(1px 1px 1px ${t[7]})`;const r={c:function(){e=E("div"),o=x(t[4]),dt(e,"data-testid","friendly-name"),dt(e,"class","friendly-name"),k(e,"filter",i),n(e,Vn,35,2,1366)},m:function(t,n){at(t,e,n),st(e,o)},p:function(t,n){16&n&&ut(o,t[4]),128&n&&i!==(i=`drop-shadow(1px 1px 1px ${t[7]})`)&&k(e,"filter",i)},d:function(t){t&&lt(e)}};return rt("SvelteRegisterBlock",{block:r,id:Xn.name,type:"if",source:"(35:1) {#if shownames && !!friendlyName}",ctx:t}),r}function Kn(e){let o,i,s,a,l,c=`${e[5]}%`,u=`${e[6]}px`,f=`${e[6]}px`,h=e[3]&&!!e[4]&&Xn(e);const m={c:function(){o=E("div"),i=E("div"),s=_(),h&&h.c(),this.c=t,dt(i,"data-testid","internal-bar"),dt(i,"class","internal-bar"),k(i,"width",c),k(i,"height",u),k(i,"background",e[7]),n(i,Vn,26,1,1178),dt(o,"data-testid","external-bar"),dt(o,"class","external-bar"),dt(o,"title","hold to reset"),k(o,"height",f),n(o,Vn,18,0,982)},l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(t,n){at(t,o,n),st(o,i),st(o,s),h&&h.m(o,null),a||(l=[d(Zn.call(null,o)),ct(o,"hold",e[14],!1,!1,!1,!1)],a=!0)},p:function(t,[e]){32&e&&c!==(c=`${t[5]}%`)&&k(i,"width",c),64&e&&u!==(u=`${t[6]}px`)&&k(i,"height",u),128&e&&k(i,"background",t[7]),t[3]&&t[4]?h?h.p(t,e):(h=Xn(t),h.c(),h.m(o,null)):h&&(h.d(1),h=null),64&e&&f!==(f=`${t[6]}px`)&&k(o,"height",f)},i:t,o:t,d:function(t){t&&lt(o),h&&h.d(),a=!1,r(l)}};return rt("SvelteRegisterBlock",{block:m,id:Kn.name,type:"component",source:"",ctx:e}),m}function Jn(t,e,n){let o,i,r,s,a,l,{$$slots:c={},$$scope:d}=e;var u,f,h;ht("datetime-bar",c,[]);let{entity:m}=e,{friendlyname:p}=e,{hass:g}=e,{resetforward:y}=e,{shownames:w}=e;t.$$.on_mount.push((function(){void 0!==y||"resetforward"in e||t.$$.bound[t.$$.props.resetforward]||console.warn("<datetime-bar> was created without expected prop 'resetforward'")}));const v=["entity","friendlyname","hass","resetforward","shownames"];Object.keys(e).forEach((t=>{~v.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn(`<datetime-bar> was created with unknown prop '${t}'`)}));return t.$$set=t=>{"entity"in t&&n(0,m=t.entity),"friendlyname"in t&&n(8,p=t.friendlyname),"hass"in t&&n(1,g=t.hass),"resetforward"in t&&n(2,y=t.resetforward),"shownames"in t&&n(3,w=t.shownames)},t.$capture_state=()=>({_a:u,_b:f,_c:h,hold:Zn,getState:pt,isExpired:gt,resetDate:yt,entity:m,friendlyname:p,hass:g,resetforward:y,shownames:w,state:l,max:a,barWidth:s,friendlyName:r,barHeight:i,barColor:o}),t.$inject_state=t=>{"_a"in t&&n(9,u=t._a),"_b"in t&&n(10,f=t._b),"_c"in t&&n(11,h=t._c),"entity"in t&&n(0,m=t.entity),"friendlyname"in t&&n(8,p=t.friendlyname),"hass"in t&&n(1,g=t.hass),"resetforward"in t&&n(2,y=t.resetforward),"shownames"in t&&n(3,w=t.shownames),"state"in t&&n(12,l=t.state),"max"in t&&n(13,a=t.max),"barWidth"in t&&n(5,s=t.barWidth),"friendlyName"in t&&n(4,r=t.friendlyName),"barHeight"in t&&n(6,i=t.barHeight),"barColor"in t&&n(7,o=t.barColor)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{1&t.$$.dirty&&n(13,a=null==m?void 0:m.max),3&t.$$.dirty&&n(12,l=pt(g,m)),12292&t.$$.dirty&&n(7,o=gt(a,y,l)?"#df4c1e":"#0da035"),3843&t.$$.dirty&&n(4,r=p||(null===n(11,h=null===n(10,f=null===n(9,u=null==g?void 0:g.states)||void 0===u?void 0:u[null==m?void 0:m.id])||void 0===f?void 0:f.attributes)||void 0===h?void 0:h.friendly_name)),24&t.$$.dirty&&n(6,i=w&&r?18:3),12292&t.$$.dirty&&n(5,s=Math.min(Math.abs(100*(y?l+a:l)/a),100))},[m,g,y,w,r,s,i,o,p,u,f,h,l,a,t=>yt(m,t,g,y?1:0)]}customElements.define("datetime-bar",class extends it{constructor(t){super();const e=document.createElement("style");e.textContent=".external-bar{position:relative;height:3px;background:#a0dea0;flex-grow:1;cursor:pointer}.internal-bar{width:0;height:3px;max-width:100%}.friendly-name{position:absolute;top:0;margin-left:3px;color:white;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",this.shadowRoot.appendChild(e),ot(this,{target:this.shadowRoot,props:S(this.attributes),customElement:!0},Jn,Kn,a,{entity:0,friendlyname:8,hass:1,resetforward:2,shownames:3},null),t&&(t.target&&at(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["entity","friendlyname","hass","resetforward","shownames"]}get entity(){return this.$$.ctx[0]}set entity(t){this.$$set({entity:t}),V()}get friendlyname(){return this.$$.ctx[8]}set friendlyname(t){this.$$set({friendlyname:t}),V()}get hass(){return this.$$.ctx[1]}set hass(t){this.$$set({hass:t}),V()}get resetforward(){return this.$$.ctx[2]}set resetforward(t){this.$$set({resetforward:t}),V()}get shownames(){return this.$$.ctx[3]}set shownames(t){this.$$set({shownames:t}),V()}});function Qn(e){let o,i,s,a;const l={c:function(){o=E("ha-icon"),this.c=t,O(o,"data-testid","icon"),O(o,"icon",e[5]),O(o,"title",i="hold to reset "+e[3]),k(o,"color",e[4]),n(o,"src/datetime/DatetimeIcon.svelte",15,0,1034)},l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(t,n){at(t,o,n),s||(a=[d(Zn.call(null,o)),ct(o,"hold",e[14],!1,!1,!1,!1)],s=!0)},p:function(t,[e]){32&e&&O(o,"icon",t[5]),8&e&&i!==(i="hold to reset "+t[3])&&O(o,"title",i),16&e&&k(o,"color",t[4])},i:t,o:t,d:function(t){t&&lt(o),s=!1,r(a)}};return rt("SvelteRegisterBlock",{block:l,id:Qn.name,type:"component",source:"",ctx:e}),l}function to(t,e,n){let o,i,r,s,a,{$$slots:l={},$$scope:c}=e;var d,u,f,h,m,p;ht("datetime-icon",l,[]);let{entity:g}=e,{hass:y}=e,{resetforward:w}=e;t.$$.on_mount.push((function(){void 0!==w||"resetforward"in e||t.$$.bound[t.$$.props.resetforward]||console.warn("<datetime-icon> was created without expected prop 'resetforward'")}));const v=["entity","hass","resetforward"];Object.keys(e).forEach((t=>{~v.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn(`<datetime-icon> was created with unknown prop '${t}'`)}));return t.$$set=t=>{"entity"in t&&n(0,g=t.entity),"hass"in t&&n(1,y=t.hass),"resetforward"in t&&n(2,w=t.resetforward)},t.$capture_state=()=>({_a:d,_b:u,_c:f,_d:h,_e:m,_f:p,getState:pt,isExpired:gt,resetDate:yt,hold:Zn,entity:g,hass:y,resetforward:w,title:a,state:s,max:r,color:i,icon:o}),t.$inject_state=t=>{"_a"in t&&n(6,d=t._a),"_b"in t&&n(7,u=t._b),"_c"in t&&n(8,f=t._c),"_d"in t&&n(9,h=t._d),"_e"in t&&n(10,m=t._e),"_f"in t&&n(11,p=t._f),"entity"in t&&n(0,g=t.entity),"hass"in t&&n(1,y=t.hass),"resetforward"in t&&n(2,w=t.resetforward),"title"in t&&n(3,a=t.title),"state"in t&&n(12,s=t.state),"max"in t&&n(13,r=t.max),"color"in t&&n(4,i=t.color),"icon"in t&&n(5,o=t.icon)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{451&t.$$.dirty&&n(5,o=null===n(8,f=null===n(7,u=null===n(6,d=null==y?void 0:y.states)||void 0===d?void 0:d[null==g?void 0:g.id])||void 0===u?void 0:u.attributes)||void 0===f?void 0:f.icon),1&t.$$.dirty&&n(13,r=null==g?void 0:g.max),3&t.$$.dirty&&n(12,s=pt(y,g)),12292&t.$$.dirty&&n(4,i=gt(r,w,s)?"#df4c1e":"#44739e"),3587&t.$$.dirty&&n(3,a=null===n(11,p=null===n(10,m=null===n(9,h=null==y?void 0:y.states)||void 0===h?void 0:h[null==g?void 0:g.id])||void 0===m?void 0:m.attributes)||void 0===p?void 0:p.friendly_name)},[g,y,w,a,i,o,d,u,f,h,m,p,s,r,t=>yt(g,t,y,w?1:0)]}customElements.define("datetime-icon",class extends it{constructor(t){super(),ot(this,{target:this.shadowRoot,props:S(this.attributes),customElement:!0},to,Qn,a,{entity:0,hass:1,resetforward:2},null),t&&(t.target&&at(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["entity","hass","resetforward"]}get entity(){return this.$$.ctx[0]}set entity(t){this.$$set({entity:t}),V()}get hass(){return this.$$.ctx[1]}set hass(t){this.$$set({hass:t}),V()}get resetforward(){return this.$$.ctx[2]}set resetforward(t){this.$$set({resetforward:t}),V()}});function eo(e){let o,i,s,a;const l={c:function(){o=E("div"),i=x(e[3]),this.c=t,dt(o,"data-testid","days"),dt(o,"title","hold to reset"),n(o,"src/datetime/DatetimeLabel.svelte",10,0,313)},l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(t,n){at(t,o,n),st(o,i),s||(a=[d(Zn.call(null,o)),ct(o,"hold",e[4],!1,!1,!1,!1)],s=!0)},p:function(t,[e]){8&e&&ut(i,t[3])},i:t,o:t,d:function(t){t&&lt(o),s=!1,r(a)}};return rt("SvelteRegisterBlock",{block:l,id:eo.name,type:"component",source:"",ctx:e}),l}function no(t,e,n){let o,{$$slots:i={},$$scope:r}=e;ht("datetime-label",i,[]);let{entity:s}=e,{hass:a}=e,{resetforward:l}=e;t.$$.on_mount.push((function(){void 0!==l||"resetforward"in e||t.$$.bound[t.$$.props.resetforward]||console.warn("<datetime-label> was created without expected prop 'resetforward'")}));const c=["entity","hass","resetforward"];Object.keys(e).forEach((t=>{~c.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn(`<datetime-label> was created with unknown prop '${t}'`)}));return t.$$set=t=>{"entity"in t&&n(0,s=t.entity),"hass"in t&&n(1,a=t.hass),"resetforward"in t&&n(2,l=t.resetforward)},t.$capture_state=()=>({formatDayString:mt,getState:pt,resetDate:yt,hold:Zn,entity:s,hass:a,resetforward:l,label:o}),t.$inject_state=t=>{"entity"in t&&n(0,s=t.entity),"hass"in t&&n(1,a=t.hass),"resetforward"in t&&n(2,l=t.resetforward),"label"in t&&n(3,o=t.label)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{3&t.$$.dirty&&n(3,o=mt(pt(a,s)))},[s,a,l,o,t=>yt(s,t,a,l?1:0)]}function oo(t){const e=e=>{!t||t.contains(e.target)||e.defaultPrevented||t.dispatchEvent(new CustomEvent("clickoutside"))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}function io(){const t=B(),e=function(){const t=B();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=C(e,n,{cancelable:o});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}();return(n,o)=>{e(n,o),t.dispatchEvent(new CustomEvent(n,{detail:o}))}}customElements.define("datetime-label",class extends it{constructor(t){super();const e=document.createElement("style");e.textContent="div{white-space:nowrap;cursor:pointer}",this.shadowRoot.appendChild(e),ot(this,{target:this.shadowRoot,props:S(this.attributes),customElement:!0},no,eo,a,{entity:0,hass:1,resetforward:2},null),t&&(t.target&&at(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["entity","hass","resetforward"]}get entity(){return this.$$.ctx[0]}set entity(t){this.$$set({entity:t}),V()}get hass(){return this.$$.ctx[1]}set hass(t){this.$$set({hass:t}),V()}get resetforward(){return this.$$.ctx[2]}set resetforward(t){this.$$set({resetforward:t}),V()}});const ro="src/DatetimeCardAutocomplete.svelte";function so(t,e,n){const o=t.slice();return o[11]=e[n].primaryText,o[12]=e[n].secondaryText,o[0]=e[n].value,o}function ao(t){let e,o,i,s=t[3].clientWidth-2+"px",a=t[2];ft(a);let l=[];for(let e=0;e<a.length;e+=1)l[e]=co(so(t,a,e));const c={c:function(){e=E("ul");for(let t=0;t<l.length;t+=1)l[t].c();dt(e,"class","items-list"),k(e,"width",s),n(e,ro,52,4,1610)},m:function(n,r){at(n,e,r);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);o||(i=[d(oo.call(null,e)),ct(e,"clickoutside",t[5],!1,!1,!1,!1)],o=!0)},p:function(t,n){if(68&n){let o;for(a=t[2],ft(a),o=0;o<a.length;o+=1){const i=so(t,a,o);l[o]?l[o].p(i,n):(l[o]=co(i),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}8&n&&s!==(s=t[3].clientWidth-2+"px")&&k(e,"width",s)},d:function(t){t&&lt(e),b(l,t),o=!1,r(i)}};return rt("SvelteRegisterBlock",{block:c,id:ao.name,type:"if",source:"(52:0) {#if filteredItems.length > 0 && value !== filteredItems[0].value}",ctx:t}),c}function lo(t){let e,o=t[12]+"";const i={c:function(){e=E("span"),dt(e,"class","secondary-text"),n(e,ro,62,20,2039)},m:function(t,n){at(t,e,n),e.innerHTML=o},p:function(t,n){4&n&&o!==(o=t[12]+"")&&(e.innerHTML=o)},d:function(t){t&&lt(e)}};return rt("SvelteRegisterBlock",{block:i,id:lo.name,type:"if",source:"(62:16) {#if !!secondaryText}",ctx:t}),i}function co(t){let e,o,i,s,a,l,c=t[11]+"",d=!!t[12]&&lo(t);function u(){return t[9](t[0])}const f={c:function(){e=E("li"),o=E("span"),i=_(),d&&d.c(),s=_(),dt(o,"class","primary-text"),n(o,ro,60,16,1927),dt(e,"class","item"),n(e,ro,59,12,1839)},m:function(t,n){at(t,e,n),st(e,o),o.innerHTML=c,st(e,i),d&&d.m(e,null),st(e,s),a||(l=[ct(e,"click",u,!1,!1,!1,!1),ct(e,"keypress",mo,!1,!1,!1,!1)],a=!0)},p:function(n,i){t=n,4&i&&c!==(c=t[11]+"")&&(o.innerHTML=c),t[12]?d?d.p(t,i):(d=lo(t),d.c(),d.m(e,s)):d&&(d.d(1),d=null)},d:function(t){t&&lt(e),d&&d.d(),a=!1,r(l)}};return rt("SvelteRegisterBlock",{block:f,id:co.name,type:"each",source:"(59:8) {#each filteredItems as { primaryText, secondaryText, value }}",ctx:t}),f}function uo(e){let o,i,r,s,a,l=e[2].length>0&&e[0]!==e[2][0].value&&ao(e);const c={c:function(){o=E("ha-textfield"),i=_(),l&&l.c(),r=D(),this.c=t,O(o,"data-testid","text-field"),O(o,"label",e[1]),O(o,"value",e[0]),n(o,ro,43,0,1420)},l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(t,n){at(t,o,n),e[8](o),at(t,i,n),l&&l.m(t,n),at(t,r,n),s||(a=ct(o,"input",e[4],!1,!1,!1,!1),s=!0)},p:function(t,[e]){2&e&&O(o,"label",t[1]),1&e&&O(o,"value",t[0]),t[2].length>0&&t[0]!==t[2][0].value?l?l.p(t,e):(l=ao(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},i:t,o:t,d:function(t){t&&lt(o),e[8](null),t&&lt(i),l&&l.d(t),t&&lt(r),s=!1,a()}};return rt("SvelteRegisterBlock",{block:c,id:uo.name,type:"component",source:"",ctx:e}),c}function fo(t,e){var n;return{primaryText:t.primaryText.replace(e,(t=>`<strong>${t}</strong>`)),secondaryText:null===(n=t.secondaryText)||void 0===n?void 0:n.replace(e,(t=>`<strong>${t}</strong>`)),value:t.value}}function ho(t,e){return e.test(t.primaryText)||e.test(t.secondaryText)}const mo=()=>{};function po(t,e,n){let{$$slots:o={},$$scope:i}=e;ht("datetime-card-autocomplete",o,[]);let{items:r=[]}=e,{label:s=""}=e,{value:a=""}=e;const l=io();let c,d=[];function u({target:t}){n(0,a=t.value),l("change",{value:a});const e=a.trim().replace(/[\-\[\]\/{}()*+?.\\^$|]/g,"\\$&");if(e.length<3)return void n(2,d=[]);const o=new RegExp(e,"gi");n(2,d=r.filter((t=>ho(t,o))).map((t=>fo(t,o))))}function f(){setTimeout((()=>n(2,d=[])),100)}function h(t){l("change",{value:t})}const m=["items","label","value"];Object.keys(e).forEach((t=>{~m.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn(`<datetime-card-autocomplete> was created with unknown prop '${t}'`)}));return t.$$set=t=>{"items"in t&&n(7,r=t.items),"label"in t&&n(1,s=t.label),"value"in t&&n(0,a=t.value)},t.$capture_state=()=>({clickoutside:oo,createEventDispatcher:io,items:r,label:s,value:a,svelteDispatch:l,filteredItems:d,textfield:c,filter:u,highlightMatch:fo,test:ho,reset:f,complete:h}),t.$inject_state=t=>{"items"in t&&n(7,r=t.items),"label"in t&&n(1,s=t.label),"value"in t&&n(0,a=t.value),"filteredItems"in t&&n(2,d=t.filteredItems),"textfield"in t&&n(3,c=t.textfield)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[a,s,d,c,u,f,h,r,function(t){z[t?"unshift":"push"]((()=>{c=t,n(3,c)}))},t=>h(t)]}customElements.define("datetime-card-autocomplete",class extends it{constructor(t){super();const e=document.createElement("style");e.textContent=":host{flex-grow:1;height:56px}ha-textfield{width:100%}.items-list{margin:0;padding:0;position:relative;z-index:1;border-left:1px solid var(--input-outlined-idle-border-color);border-right:1px solid var(--input-outlined-idle-border-color);border-bottom:1px solid var(--input-outlined-idle-border-color)}.item{display:flex;flex-direction:column;list-style:none;padding:10px 10px 10px 25px;cursor:pointer;background-color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.item:hover{background-color:var(--mdc-text-field-fill-color, whitesmoke)}.primary-text{color:var(--mdc-dialog-content-ink-color, rgba(0, 0, 0, 0.6))}.secondary-text{font-size:0.9em;color:var(--mdc-text-field-label-ink-color, rgba(0, 0, 0, 0.6))}",this.shadowRoot.appendChild(e),ot(this,{target:this.shadowRoot,props:S(this.attributes),customElement:!0},po,uo,a,{items:7,label:1,value:0},null),t&&(t.target&&at(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["items","label","value"]}get items(){return this.$$.ctx[7]}set items(t){this.$$set({items:t}),V()}get label(){return this.$$.ctx[1]}set label(t){this.$$set({label:t}),V()}get value(){return this.$$.ctx[0]}set value(t){this.$$set({value:t}),V()}});class go{constructor(t){this.key=t,this.id="",this.max="",this.key=t,this.friendly_name=""}}function yo(t){const e=t-1;return e*e*e+1}function wo(t,{from:e,to:n},o={}){const i=getComputedStyle(t),r="none"===i.transform?"":i.transform,[a,l]=i.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*a/n.width-(n.left+a),d=e.top+e.height*l/n.height-(n.top+l),{delay:u=0,duration:f=(t=>120*Math.sqrt(t)),easing:h=yo}=o;return{delay:u,duration:s(f)?f(Math.sqrt(c*c+d*d)):f,easing:h,css:(t,o)=>{const i=o*c,s=o*d,a=t+o*e.width/n.width,l=t+o*e.height/n.height;return`transform: ${r} translate(${i}px, ${s}px) scale(${a}, ${l});`}}}const{Object:vo}=g,$o="src/DatetimeCardEditor.svelte";function bo(t,e,n){const o=t.slice();return o[40]=e[n],o[42]=n,o}function Eo(e){let o;const i={c:function(){o=E("div"),n(o,$o,266,16,8039)},m:function(t,e){at(t,o,e)},p:t,d:function(t){t&&lt(o)}};return rt("SvelteRegisterBlock",{block:i,id:Eo.name,type:"else",source:"(266:16) {:else }",ctx:e}),i}function xo(t){let e,o,i,s,a;function l(){return t[31](t[40])}const c={c:function(){e=E("ha-icon-button"),o=E("ha-icon"),O(o,"icon","mdi:delete"),n(o,$o,263,20,7935),O(e,"data-testid",i="delete-"+t[42]),n(e,$o,258,16,7723)},m:function(t,n){at(t,e,n),st(e,o),s||(a=[ct(e,"click",l,!1,!1,!1,!1),ct(e,"keypress",ko,!1,!1,!1,!1)],s=!0)},p:function(n,o){t=n,8&o[0]&&i!==(i="delete-"+t[42])&&O(e,"data-testid",i)},d:function(t){t&&lt(e),s=!1,r(a)}};return rt("SvelteRegisterBlock",{block:c,id:xo.name,type:"if",source:"(258:12) {#if draggableEntities.length > 1}",ctx:t}),c}function _o(e,o){let i,s,a,l,c,d,u,f,h,m,p,g,y,w,v,$,b,x,D,T,k,C,S,A,R,L,I=t;function N(...t){return o[29](o[40],...t)}function j(...t){return o[30](o[40],...t)}function B(t,e){return t[3].length>1?xo:Eo}let F=B(o),z=F(o);function G(...t){return o[32](o[40],...t)}const W={key:e,first:null,c:function(){i=E("div"),s=E("ha-icon"),l=_(),c=E("datetime-card-autocomplete"),f=_(),h=E("ha-textfield"),g=_(),z.c(),y=_(),w=E("div"),v=_(),$=E("ha-textfield"),D=_(),T=E("div"),k=_(),C=E("div"),S=_(),O(s,"data-testid",a="handle-"+o[42]),O(s,"class","handle"),O(s,"icon","mdi:drag"),n(s,$o,232,12,6761),O(c,"data-testid",d="datetime-card-autocomplete-"+o[42]),O(c,"label","Entity"),O(c,"items",o[9]),O(c,"value",u=o[40].id),n(c,$o,241,12,7093),O(h,"data-testid",m="max-"+o[42]),O(h,"class","max-textfield"),O(h,"label","Max"),O(h,"value",p=o[40].max),n(h,$o,249,12,7404),n(w,$o,268,12,8081),O($,"data-testid",b="friendly-name-"+o[42]),O($,"class","friendly-name"),O($,"label","Friendly name"),O($,"value",x=o[40].friendly_name),n($,$o,269,12,8105),n(T,$o,276,12,8411),n(C,$o,277,12,8435),dt(i,"role","listitem"),dt(i,"class","entity"),n(i,$o,227,8,6611),this.first=i},m:function(t,e){at(t,i,e),st(i,s),st(i,l),st(i,c),st(i,f),st(i,h),st(i,g),z.m(i,null),st(i,y),st(i,w),st(i,v),st(i,$),st(i,D),st(i,T),st(i,k),st(i,C),st(i,S),R||(L=[ct(s,"mousedown",o[15],!1,!1,!1,!1),ct(s,"touchstart",o[15],{passive:!0},!1,!1,!1),ct(s,"mouseup",o[16],!1,!1,!1,!1),ct(s,"touchend",o[16],{passive:!0},!1,!1,!1),ct(c,"change",N,!1,!1,!1,!1),ct(h,"input",j,!1,!1,!1,!1),ct($,"input",G,!1,!1,!1,!1)],R=!0)},p:function(t,e){o=t,8&e[0]&&a!==(a="handle-"+o[42])&&O(s,"data-testid",a),8&e[0]&&d!==(d="datetime-card-autocomplete-"+o[42])&&O(c,"data-testid",d),512&e[0]&&O(c,"items",o[9]),8&e[0]&&u!==(u=o[40].id)&&O(c,"value",u),8&e[0]&&m!==(m="max-"+o[42])&&O(h,"data-testid",m),8&e[0]&&p!==(p=o[40].max)&&O(h,"value",p),F===(F=B(o))&&z?z.p(o,e):(z.d(1),z=F(o),z&&(z.c(),z.m(i,y))),8&e[0]&&b!==(b="friendly-name-"+o[42])&&O($,"data-testid",b),8&e[0]&&x!==(x=o[40].friendly_name)&&O($,"value",x)},r:function(){A=i.getBoundingClientRect()},f:function(){P(i),I()},a:function(){I(),I=M(i,A,wo,{duration:To})},d:function(t){t&&lt(i),z.d(),R=!1,r(L)}};return rt("SvelteRegisterBlock",{block:W,id:_o.name,type:"each",source:"(227:4) {#each draggableEntities as entity, index (entity.key)}",ctx:o}),W}function Do(e){let o,i,a,l,c,u,f,h,m,p,g,y,w,v,$,b,x,D,T,k,C,S,A,R,L,I,N,M,P,j,B,F,z,G,W,U=[],H=new Map,Y=e[3];ft(Y);const q=t=>t[40].key;tt(e,Y,bo,q);for(let t=0;t<Y.length;t+=1){let n=bo(e,Y,t),o=q(n);H.set(o,U[t]=_o(o,n))}const Z={c:function(){o=E("ha-textfield"),i=_(),a=E("ha-textfield"),l=_(),c=E("section"),u=E("ha-switch"),f=_(),h=E("label"),h.textContent="Column",m=_(),p=E("ha-switch"),g=_(),y=E("label"),y.textContent="Reset forward",w=_(),v=E("ha-switch"),$=_(),b=E("label"),b.textContent="Reverse",x=_(),D=E("ha-switch"),T=_(),k=E("label"),k.textContent="Show expired only",C=_(),S=E("ha-switch"),A=_(),R=E("label"),R.textContent="Show names",L=_(),I=E("h3"),I.textContent="Entities (required)",N=_(),M=E("section");for(let t=0;t<U.length;t+=1)U[t].c();j=_(),B=E("div"),F=E("ha-icon-button"),z=E("ha-icon"),this.c=t,O(o,"data-testid","title"),O(o,"label","Title (optional)"),O(o,"value",e[8]),n(o,$o,156,0,4850),O(a,"data-testid","image"),O(a,"label","Image (optional)"),O(a,"value",e[5]),n(a,$o,163,0,4982),O(u,"id","column-switch"),O(u,"aria-label","Column"),O(u,"checked",e[0]),n(u,$o,171,4,5145),dt(h,"for","column-switch"),n(h,$o,177,4,5296),O(p,"id","reset-forward-switch"),O(p,"aria-label","Reset forward"),O(p,"checked",e[1]),n(p,$o,179,4,5343),dt(y,"for","reset-forward-switch"),n(y,$o,185,4,5521),O(v,"id","reverse-switch"),O(v,"aria-label","Reverse"),O(v,"checked",e[2]),n(v,$o,187,4,5582),dt(b,"for","reverse-switch"),n(b,$o,193,4,5737),O(D,"id","show-expired-only-switch"),O(D,"aria-label","Show expired only"),O(D,"checked",e[6]),n(D,$o,195,4,5786),dt(k,"for","show-expired-only-switch"),n(k,$o,201,4,5979),O(S,"id","show-names-switch"),O(S,"aria-label","Show names"),O(S,"checked",e[7]),n(S,$o,203,4,6048),dt(R,"for","show-names-switch"),n(R,$o,209,4,6214),dt(c,"class","switches"),n(c,$o,170,0,5114),n(I,$o,212,0,6276),dt(M,"data-testid","entities"),dt(M,"class","entities"),n(M,$o,214,0,6306),O(z,"icon","mdi:plus"),n(z,$o,283,8,8602),O(F,"data-testid","plus"),O(F,"class","plus"),n(F,$o,282,4,8508),dt(B,"class","plus"),n(B,$o,281,0,8485)},l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(t,n){at(t,o,n),at(t,i,n),at(t,a,n),at(t,l,n),at(t,c,n),st(c,u),st(c,f),st(c,h),st(c,m),st(c,p),st(c,g),st(c,y),st(c,w),st(c,v),st(c,$),st(c,b),st(c,x),st(c,D),st(c,T),st(c,k),st(c,C),st(c,S),st(c,A),st(c,R),at(t,L,n),at(t,I,n),at(t,N,n),at(t,M,n);for(let t=0;t<U.length;t+=1)U[t]&&U[t].m(M,null);at(t,j,n),at(t,B,n),st(B,F),st(F,z),G||(W=[ct(o,"input",e[26],!1,!1,!1,!1),ct(a,"input",e[21],!1,!1,!1,!1),ct(u,"change",e[17],!1,!1,!1,!1),ct(p,"change",e[23],!1,!1,!1,!1),ct(v,"change",e[24],!1,!1,!1,!1),ct(D,"change",e[19],!1,!1,!1,!1),ct(S,"change",e[25],!1,!1,!1,!1),d(P=Hn.call(null,M,{items:e[3],dragDisabled:e[4],dropTargetStyle:e[10],flipDurationMs:To})),ct(M,"consider",e[11],!1,!1,!1,!1),ct(M,"finalize",e[12],!1,!1,!1,!1),ct(F,"click",e[13],!1,!1,!1,!1),ct(F,"keypress",Co,!1,!1,!1,!1)],G=!0)},p:function(t,e){if(256&e[0]&&O(o,"value",t[8]),32&e[0]&&O(a,"value",t[5]),1&e[0]&&O(u,"checked",t[0]),2&e[0]&&O(p,"checked",t[1]),4&e[0]&&O(v,"checked",t[2]),64&e[0]&&O(D,"checked",t[6]),128&e[0]&&O(S,"checked",t[7]),5620232&e[0]){Y=t[3],ft(Y);for(let t=0;t<U.length;t+=1)U[t].r();tt(t,Y,bo,q),U=function(t,e,n,o,i,s,a,l,c,d,u,f){let h=t.length,m=s.length,p=h;const g={};for(;p--;)g[t[p].key]=p;const y=[],w=new Map,v=new Map,$=[];for(p=m;p--;){const t=f(i,s,p),r=n(t);let l=a.get(r);l?o&&$.push((()=>l.p(t,e))):(l=d(r,t),l.c()),w.set(r,y[p]=l),r in g&&v.set(r,Math.abs(p-g[r]))}const b=new Set,E=new Set;function x(t){J(t,1),t.m(l,u),a.set(t.key,t),u=t.first,m--}for(;h&&m;){const e=y[m-1],n=t[h-1],o=e.key,i=n.key;e===n?(u=e.first,h--,m--):w.has(i)?!a.has(o)||b.has(o)?x(e):E.has(i)?h--:v.get(o)>v.get(i)?(E.add(o),x(e)):(b.add(i),h--):(c(n,a),h--)}for(;h--;){const e=t[h];w.has(e.key)||c(e,a)}for(;m;)x(y[m-1]);return r($),y}(U,e,q,1,t,Y,H,M,Q,_o,null,bo);for(let t=0;t<U.length;t+=1)U[t].a()}P&&s(P.update)&&24&e[0]&&P.update.call(null,{items:t[3],dragDisabled:t[4],dropTargetStyle:t[10],flipDurationMs:To})},i:t,o:t,d:function(t){t&&lt(o),t&&lt(i),t&&lt(a),t&&lt(l),t&&lt(c),t&&lt(L),t&&lt(I),t&&lt(N),t&&lt(M);for(let t=0;t<U.length;t+=1)U[t].d();t&&lt(j),t&&lt(B),G=!1,r(W)}};return rt("SvelteRegisterBlock",{block:Z,id:Do.name,type:"component",source:"",ctx:e}),Z}const To=200;function Oo({friendly_name:t,id:e,max:n}){return{friendly_name:t,id:e,max:parseInt(n)||0}}const ko=()=>{},Co=()=>{};function So(t,e,n){let o,{$$slots:i={},$$scope:r}=e;ht("datetime-card-editor",i,[]);let{hass:s}=e;function a(t){var e,o;n(3,y=C(t.entities)),n(7,u=t.show_names||!1),n(0,h=null===(e=t.flex_direction)||void 0===e?void 0:e.includes("column")),n(1,m=t.reset_forward||!1),n(2,p=null===(o=t.flex_direction)||void 0===o?void 0:o.includes("reverse")),n(5,d=t.image||""),n(8,f=t.title||""),n(6,v=t.show_expired_only||!1)}const l={outline:"var(--primary-color) solid 2px"},c=io();let d,u,f,h=!1,m=!1,p=!1,g=0,y=[new go(x())],w=!0,v=!1;function $(t){n(3,y=t.detail.items)}function b(){const t=y.map(Oo);c("config-changed",{config:{entities:t,flex_direction:(h?"column":"row")+(p?"-reverse":""),image:d,reset_forward:m,show_expired_only:v,show_names:u,title:f,type:"custom:datetime-card"}})}function E(t){n(3,y=t.detail.items),n(4,w=!0),b()}function x(){return g++}function _(){n(3,y=[...y,new go(x())])}function D(t){n(3,y=y.filter((({key:e})=>e!==t))),b()}function T(){y.length<2||n(4,w=!1)}function O(){n(4,w=!0)}function k(t){return{primaryText:s.states[t].attributes.friendly_name,secondaryText:t,value:t}}function C(t){if(!t)return[new go(x())];if(t.length!==y.length)return t.map(S);const e=[...y];for(let n=0;n<t.length;n++){const o=t[n].max>0?t[n].max.toString():"";e[n].friendly_name=t[n].friendly_name||"",e[n].id=t[n].id,e[n].max=o}return e}function S({friendly_name:t,id:e,max:n}){return{friendly_name:t,id:e,key:x(),max:n>0?n.toString():""}}function A(t){n(0,h=t.target.checked),b()}function R(t,e){const n=t.target.value;e.friendly_name=n||void 0,b()}function L(t){n(6,v=t.target.checked),b()}function I(t,e){e.id=t.detail.value,b()}function N(t){n(5,d=t.target.value),b()}function M(t,e){const n=Number(t.target.value);!Number.isInteger(n)||n<0?t.target.value=e.max:(t.target.value=n.toString(),e.max=n.toString(),b())}function P(t){n(1,m=t.target.checked),b()}function j(t){n(2,p=t.target.checked),b()}function B(t){n(7,u=t.target.checked),b()}function F(t){n(8,f=t.target.value),b()}const z=["hass"];vo.keys(e).forEach((t=>{~z.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn(`<datetime-card-editor> was created with unknown prop '${t}'`)}));return t.$$set=t=>{"hass"in t&&n(27,s=t.hass)},t.$capture_state=()=>({createEventDispatcher:io,dndzone:Hn,DraggableEntity:go,flip:wo,hass:s,setConfig:a,dropTargetStyle:l,flipDurationMs:To,svelteDispatch:c,column:h,reset_forward:m,reverse:p,key:g,draggableEntities:y,dragDisabled:w,image:d,show_expired_only:v,show_names:u,title:f,consider:$,dispatchConfigChanged:b,finalize:E,newKey:x,push:_,splice:D,startDrag:T,stopDrag:O,toAutocompleteItem:k,toDraggableEntities:C,toDraggableEntity:S,toEntity:Oo,updateColumn:A,updateFriendlyName:R,updateShowExpiredOnly:L,updateId:I,updateImage:N,updateMax:M,updateResetForward:P,updateReverse:j,updateShowNames:B,updateTitle:F,autocompleteItems:o}),t.$inject_state=t=>{"hass"in t&&n(27,s=t.hass),"column"in t&&n(0,h=t.column),"reset_forward"in t&&n(1,m=t.reset_forward),"reverse"in t&&n(2,p=t.reverse),"key"in t&&(g=t.key),"draggableEntities"in t&&n(3,y=t.draggableEntities),"dragDisabled"in t&&n(4,w=t.dragDisabled),"image"in t&&n(5,d=t.image),"show_expired_only"in t&&n(6,v=t.show_expired_only),"show_names"in t&&n(7,u=t.show_names),"title"in t&&n(8,f=t.title),"autocompleteItems"in t&&n(9,o=t.autocompleteItems)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{134217728&t.$$.dirty[0]&&n(9,o=Object.keys((null==s?void 0:s.states)||{}).filter((t=>t.startsWith("input_datetime"))).map((t=>k(t))))},[h,m,p,y,w,d,v,u,f,o,l,$,E,_,D,T,O,A,R,L,I,N,M,P,j,B,F,s,a,(t,e)=>I(e,t),(t,e)=>M(e,t),t=>D(t.key),(t,e)=>R(e,t)]}customElements.define("datetime-card-editor",class extends it{constructor(t){super();const e=document.createElement("style");e.textContent=":host{display:flex;flex-direction:column}ha-textfield{margin-top:3px;margin-bottom:5px}ha-switch{margin-left:30px}.entity{display:grid;grid-template-columns:auto 1fr auto auto;margin-bottom:5px}.handle{cursor:grab;padding-right:8px;width:32px}.max-textfield{margin:0 0 0 5px;max-width:60px}.plus{display:flex;justify-content:flex-end}",this.shadowRoot.appendChild(e),ot(this,{target:this.shadowRoot,props:S(this.attributes),customElement:!0},So,Do,a,{hass:27,setConfig:28},null,[-1,-1]),t&&(t.target&&at(t.target,this,t.anchor),t.props&&(this.$set(t.props),V()))}static get observedAttributes(){return["hass","setConfig"]}get hass(){return this.$$.ctx[27]}set hass(t){this.$$set({hass:t}),V()}get setConfig(){return this.$$.ctx[28]}set setConfig(t){throw new Error("<datetime-card-editor>: Cannot set read-only property 'setConfig'")}}),window.customCards=window.customCards||[],window.customCards.push({type:"datetime-card",name:"Datetime Card",preview:!0,description:"Datetime card"}),At.getConfigElement=()=>document.createElement("datetime-card-editor"),function(t){if(Jt>0)throw new Error("can only override the id key before initialising any dndzone");if("string"!=typeof t)throw new Error("item id key has to be a string");Kt=t}("key")}();
//# sourceMappingURL=datetime-card.js.map
